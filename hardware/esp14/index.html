<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Michael Mayer">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>ESP14 Wifi board (STM8S003F3P6) - Sduino</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Sduino</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../..">Introduction</a>
</li>
                                    
<li >
    <a href="../../usage/board-manager-install/">Automatic Installation</a>
</li>
                                    
<li >
    <a href="../../usage/build-ide/">Building with the IDE</a>
</li>
                                    
<li >
    <a href="../../usage/faq/">FAQ/common problems</a>
</li>
                                    
<li >
    <a href="../../usage/why-stm8/">When to use an STM8S - and when not</a>
</li>
                                    
<li >
    <a href="../../usage/interrupts/">Pin change interrupts</a>
</li>
                                    
<li >
    <a href="../../usage/manual-install/">Manual Installation</a>
</li>
                                    
<li >
    <a href="../../usage/build-cli/">Building with a Makefile</a>
</li>
                                    
<li >
    <a href="../../usage/limitations/">Limitations</a>
</li>
                                    
<li >
    <a href="../../usage/status-todo/">Status and todo</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Libraries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../api/migration/">API description and migration guidelines</a>
</li>
                                    
<li >
    <a href="../../api/Print/">Print</a>
</li>
                                    
<li >
    <a href="../../api/HardwareSerial/">HardwareSerial</a>
</li>
                                    
<li >
    <a href="../../api/SPI/">SPI</a>
</li>
                                    
<li >
    <a href="../../api/Wire/">Wire</a>
</li>
                                    
<li >
    <a href="../../api/I2C/">I2C</a>
</li>
                                    
<li >
    <a href="../../api/EEPROM/">EEPROM</a>
</li>
                                    
<li >
    <a href="../../api/LiquidCrystal/">LiquidCrystal character LCD library</a>
</li>
                                    
<li >
    <a href="../../api/LiquidCrystal_I2C/">LiquidCrystal_I2C character LCD connected via I2C backpack boards</a>
</li>
                                    
<li >
    <a href="../../api/LiquidCrystal_pcf2119/">LiquidCrystal_pcf2119 character LCD connected via I2C</a>
</li>
                                    
<li >
    <a href="../../api/PCD8544/">PCD8544 libray for Nokia 5110-like graphical LCDs</a>
</li>
                                    
<li >
    <a href="../../api/Mini_SSD1306/">Mini_SSD1306 library for monochrome OLED-displays</a>
</li>
                                    
<li >
    <a href="../../api/Stepper/">Stepper library</a>
</li>
                                    
<li >
    <a href="../../api/Servo/">Servo library</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../flashtool/">Flash tool</a>
</li>
                                    
<li >
    <a href="../stm8blue/">Generic STM8S103F3 breakout board (stm8blue)</a>
</li>
                                    
<li >
    <a href="../stm8s003/">Generic STM8S003 support</a>
</li>
                                    
<li class="active">
    <a href="./">ESP14 Wifi board (STM8S003F3P6)</a>
</li>
                                    
<li >
    <a href="../w1209-thermostat/">W1209 thermostat board (STM8S003F3P6)</a>
</li>
                                    
<li >
    <a href="../stm8sblack/">Generic STM8S105K4 breakout board (stm8sblack)</a>
</li>
                                    
<li >
    <a href="../stm8sdiscovery/">STM8S105Discovery evaluation board made by ST (STM8S105C6)</a>
</li>
                                    
<li >
    <a href="https://github.com/roybaer/sduino_uno">sduino Uno (STM8S105K6), inspired by Arduino Uno</a>
</li>
                                    
<li >
    <a href="https://github.com/roybaer/sduino_mb">sduino MB (STM8S208MB), inspired by Arduino Mega</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../developer/ide-integration/">IDE integration</a>
</li>
                                    
<li >
    <a href="../../developer/compiling-the-tools/">Compiling the tools</a>
</li>
                                    
<li >
    <a href="../../developer/cross-compile-for-osx/">Cross-compiling the tools for OSX</a>
</li>
                                    
<li >
    <a href="../../developer/update-to-manual/">Update an automatic installation to a manual installation</a>
</li>
                                    
<li >
    <a href="../../developer/macro/">C preprocessor macro magic</a>
</li>
                                    
<li >
    <a href="../../developer/pin_mapping/">Ways to define a pin mapping</a>
</li>
                                    
<li >
    <a href="../../developer/coding-style/">Coding style</a>
</li>
                                    
<li >
    <a href="../../developer/sdcc/">Using the SDCC compiler</a>
</li>
                                    
<li >
    <a href="../../developer/spl/">Using the SPL with SDCC and sduino</a>
</li>
                                    
<li >
    <a href="../../developer/bare-metal-programming/">Bare metal programming on the STM8</a>
</li>
                                    
<li >
    <a href="../../developer/optimizations/">Optimizations</a>
</li>
                                    
<li >
    <a href="../../developer/performance/">Performance comparison and benchmarking</a>
</li>
                                    
<li >
    <a href="../../developer/links/">Links and further reading</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../contact/">Contact</a>
                            </li>
                            <li >
                                <a href="../../about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../stm8s003/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../w1209-thermostat/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/tenbaht/sduino/edit/master/docs/hardware/esp14.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#esp-14">ESP-14</a></li>
            <li><a href="#differences-between-the-003-and-the-103-cpus">Differences between the '003 and the '103 CPUs</a></li>
            <li><a href="#using-the-wifi-connection">Using the Wifi connection</a></li>
            <li><a href="#poor-design-choice">Poor design choice</a></li>
            <li><a href="#the-upside">The upside</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="esp-14">ESP-14</h1>
<p>An ESP-8266 Wifi-Controller together with a STM8S003 CPU for about $2 -
incredible.  Since the STM8S003 is almost identical to the STM8S103 used on
the <a href="../stm8blue/">STM8S103 breakout boards</a> all software runs here as well.</p>
<p>Using the same pin numbering scheme as with the stm8blue boards it looks
like this:</p>
<p><img alt="ESP14 sduino pin numbering" src="../esp14.png" /></p>
<h2 id="differences-between-the-003-and-the-103-cpus">Differences between the '003 and the '103 CPUs</h2>
<p>Very slim. All differences that I could find so far:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>STM8S003</th>
<th>STM8S103</th>
</tr>
</thead>
<tbody>
<tr>
<td>EEPROM size</td>
<td>128 Bytes</td>
<td>640 Bytes</td>
</tr>
</tbody>
</table>
<p>I am not sure why the '003 is sold for half the price, or, to put it the
other way around, why anybody should choose the '103 at all. Did I miss an
important difference?</p>
<h2 id="using-the-wifi-connection">Using the Wifi connection</h2>
<p>The ESP-14 is basically an ESP-01 Wifi-module together with a STM8S breakout
board combined into one PCB. The ESP part comes preprogrammed with the
usual ESP AT-Firmware and is connected to the RX/TX pins of the STM8S.</p>
<p>It feels like having a classic ATmega8-Arduino with a build-in ESP-01
module. Using the <a href="https://github.com/bportaluri/WiFiEsp">WiFiEsp library</a>
we could have a programming experience very similar to using an Arduino with
a Wifi-shield or an Arduino Yun.</p>
<p>The main problem is the limited flash space of the '003. Even the very basic
WebServer example that comes with the WiFiEsp library needs more then 14kB
flash and more than 1kB RAM when compiled for an Arduino Uno. Even if the
library could be carefully optimized to fit into the 8kB flash of an '003 -
there would be no space left for the actual user code.</p>
<p>It is still possible to do very simple task by just sending AT-strings to
the ESP. But here we are definitly leaving Ardunio territory. Here we have
to start from scratch and do it all by ourself. This is not going to be
beginner-friendly anymore.</p>
<p>The major remaining advantage of the STM8S over the ESP is power efficiency.
The STM8S runs on almost nothing, while the ESP draws anything between 50
and 200mA even for the simplest tasks.</p>
<p>In most cases you might want to implement the external communication part of
the application on the ESP, using the
<a href="https://github.com/esp8266/Arduino">ESP8266 Arduino port</a>.</p>
<p>The STM8S is better suited to local control and measurement and other
energy- and time-critical tasks. Both CPUs use separate power supply inputs.
Using an additional PMOS transistor the STM8S could control the power supply
for the ESP and help extending battery life by activating the big brother
only when its services are actually required.</p>
<h2 id="poor-design-choice">Poor design choice</h2>
<p>Overall, the '003 is a very questionable CPU choice by AI Thinker. The '003
is clearly one of the cheapest CPUs on the market, but the applications for
this module are heavily restricted the the small flash memory.</p>
<p>Why didn't they use an ATmega328? Just one dollar more and the whole Arduino
universe opens up. Or at least an STM8S005K6T6C, offering 32kB flash and 2kB
RAM for only 40 cents more, if you want to go really cheap.</p>
<p>And why would you need an external PMOS to control the ESP power supply?
Why is this not included on the PCB already? This could the big killer
feature of the current combination.</p>
<h2 id="the-upside">The upside</h2>
<p>Having a beefy 32 bit CPU and using it as an I/O-coprocessor while running
the main application on an resticted 8-bitter is a weired concept. Things
like the Arduino Yun or the Arduino WiFi-shield don't make too much sense.</p>
<p>It is much more sensible to use the big CPU to control the small one than
the other way around. Maybe this board can help to promote that concept.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
