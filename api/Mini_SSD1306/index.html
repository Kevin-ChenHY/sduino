<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Michael Mayer">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Mini_SSD1306 library for monochrome OLED-displays - Sduino</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Sduino</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../..">Introduction</a>
</li>
                                    
<li >
    <a href="../../usage/board-manager-install/">Automatic Installation</a>
</li>
                                    
<li >
    <a href="../../usage/build-ide/">Building with the IDE</a>
</li>
                                    
<li >
    <a href="../../usage/faq/">FAQ/common problems</a>
</li>
                                    
<li >
    <a href="../../usage/why-stm8/">When to use an STM8S - and when not</a>
</li>
                                    
<li >
    <a href="../../usage/interrupts/">Pin change interrupts</a>
</li>
                                    
<li >
    <a href="../../usage/manual-install/">Manual Installation</a>
</li>
                                    
<li >
    <a href="../../usage/build-cli/">Building with a Makefile</a>
</li>
                                    
<li >
    <a href="../../usage/limitations/">Limitations</a>
</li>
                                    
<li >
    <a href="../../usage/status-todo/">Status and todo</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Libraries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../migration/">API description and migration guidelines</a>
</li>
                                    
<li >
    <a href="../Print/">Print</a>
</li>
                                    
<li >
    <a href="../HardwareSerial/">HardwareSerial</a>
</li>
                                    
<li >
    <a href="../SPI/">SPI</a>
</li>
                                    
<li >
    <a href="../Wire/">Wire</a>
</li>
                                    
<li >
    <a href="../I2C/">I2C</a>
</li>
                                    
<li >
    <a href="../EEPROM/">EEPROM</a>
</li>
                                    
<li >
    <a href="../LiquidCrystal/">LiquidCrystal character LCD library</a>
</li>
                                    
<li >
    <a href="../LiquidCrystal_I2C/">LiquidCrystal_I2C character LCD connected via I2C backpack boards</a>
</li>
                                    
<li >
    <a href="../LiquidCrystal_pcf2119/">LiquidCrystal_pcf2119 character LCD connected via I2C</a>
</li>
                                    
<li >
    <a href="../PCD8544/">PCD8544 libray for Nokia 5110-like graphical LCDs</a>
</li>
                                    
<li class="active">
    <a href="./">Mini_SSD1306 library for monochrome OLED-displays</a>
</li>
                                    
<li >
    <a href="../Stepper/">Stepper library</a>
</li>
                                    
<li >
    <a href="../Servo/">Servo library</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../hardware/flashtool/">Flash tool</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8blue/">Generic STM8S103F3 breakout board (stm8blue)</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8s003/">Generic STM8S003 support</a>
</li>
                                    
<li >
    <a href="../../hardware/esp14/">ESP14 Wifi board (STM8S003F3P6)</a>
</li>
                                    
<li >
    <a href="../../hardware/w1209-thermostat/">W1209 thermostat board (STM8S003F3P6)</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8sblack/">Generic STM8S105K4 breakout board (stm8sblack)</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8sdiscovery/">STM8S105Discovery evaluation board made by ST (STM8S105C6)</a>
</li>
                                    
<li >
    <a href="https://github.com/roybaer/sduino_uno">sduino Uno (STM8S105K6), inspired by Arduino Uno</a>
</li>
                                    
<li >
    <a href="https://github.com/roybaer/sduino_mb">sduino MB (STM8S208MB), inspired by Arduino Mega</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../developer/ide-integration/">IDE integration</a>
</li>
                                    
<li >
    <a href="../../developer/compiling-the-tools/">Compiling the tools</a>
</li>
                                    
<li >
    <a href="../../developer/cross-compile-for-osx/">Cross-compiling the tools for OSX</a>
</li>
                                    
<li >
    <a href="../../developer/update-to-manual/">Update an automatic installation to a manual installation</a>
</li>
                                    
<li >
    <a href="../../developer/macro/">C preprocessor macro magic</a>
</li>
                                    
<li >
    <a href="../../developer/pin_mapping/">Ways to define a pin mapping</a>
</li>
                                    
<li >
    <a href="../../developer/coding-style/">Coding style</a>
</li>
                                    
<li >
    <a href="../../developer/sdcc/">Using the SDCC compiler</a>
</li>
                                    
<li >
    <a href="../../developer/spl/">Using the SPL with SDCC and sduino</a>
</li>
                                    
<li >
    <a href="../../developer/bare-metal-programming/">Bare metal programming on the STM8</a>
</li>
                                    
<li >
    <a href="../../developer/optimizations/">Optimizations</a>
</li>
                                    
<li >
    <a href="../../developer/performance/">Performance comparison and benchmarking</a>
</li>
                                    
<li >
    <a href="../../developer/links/">Links and further reading</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../contact/">Contact</a>
                            </li>
                            <li >
                                <a href="../../about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../PCD8544/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../Stepper/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/tenbaht/sduino/edit/master/docs/api/Mini_SSD1306.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#mini_ssd1306">Mini_SSD1306</a></li>
            <li><a href="#limitations">Limitations</a></li>
            <li><a href="#api">API</a></li>
            <li><a href="#example">Example</a></li>
            <li><a href="#hardware-requirements">Hardware requirements</a></li>
            <li><a href="#further-reading">Further reading</a></li>
            <li><a href="#possible-improvements">Possible improvements</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="mini_ssd1306">Mini_SSD1306</h1>
<p>This is a library for monochrome OLEDs based on SSD1306 drivers.</p>
<p>This library is a stripped-down version of the original
<a href="https://github.com/adafruit/Adafruit_SSD1306">Adafruit_SSD1306 library</a>
v1.1.2.
This version of the library does not depend on the Adafruit_GFX library and
has a <em>much</em> smaller memory footprint than the full version, but most of the
graphical features are missing.</p>
<p>The Library only supports I2C communication.</p>
<h2 id="limitations">Limitations</h2>
<p>This Library uses a full display buffer. For a 128x64 display this requires
128x64 = 8kbit = 1kB of RAM for the display buffer. Since the STM8S103 has
only 1kB RAM total, there is no way that this will fit. If you ignore the
compiler warnings about insufficient RAM, it will still run, but you will
see a graphical memory dump in the lower part of your display. If you are
careful not to modify that part of the memory the program still works, but
is not terribly useful. See the oled-mini example.</p>
<p>The <a href="https://github.com/olikraus/u8g2/wiki">u8g2</a> library by Oli Kraus is
able to use less RAM by rendering the image in multiple stripes. This is
slower, but saves RAM. I am thinking of porting that library, but don't hold
your breath for it.</p>
<h2 id="api">API</h2>
<pre><code class="c">SSD1306(instancename, pin_reset);

void Mini_SSD1306_begin(uint8_t switchvcc, uint8_t i2caddr, bool reset);
void Mini_SSD1306_clearDisplay(void);
void Mini_SSD1306_invertDisplay(uint8_t i);
void Mini_SSD1306_display();
void Mini_SSD1306_startscrollright(uint8_t start, uint8_t stop);
void Mini_SSD1306_startscrollleft(uint8_t start, uint8_t stop);
void Mini_SSD1306_startscrolldiagright(uint8_t start, uint8_t stop);
void Mini_SSD1306_startscrolldiagleft(uint8_t start, uint8_t stop);
void Mini_SSD1306_stopscroll(void);
void Mini_SSD1306_dim(boolean dim);
void Mini_SSD1306_drawPixel(int16_t x, int16_t y, uint8_t color);
</code></pre>

<h2 id="example">Example</h2>
<p>The library initializes the display buffer with the Adafruit splash screen.
Since it is not modified, <code>oled_display()</code> shows it. The loop draws a
pattern of blinking pixels in an 8x8 grid:</p>
<pre><code class="c">#include &quot;I2C.h&quot;
#include &quot;Mini_SSD1306.h&quot;

Mini_SSD1306(oled,-1);  // -1 means no reset pin

#if (SSD1306_LCDHEIGHT != 64)
#error(&quot;Height incorrect, please fix Mini_SSD1306.h!&quot;);
#endif

void setup()
{
    // Initialize with the I2C addr 0x3C. Some displays use 0x3D instead.
    oled_begin(SSD1306_SWITCHCAPVCC, 0x3C,0);
}

void loop()
{
    uint8_t x,y;

    oled_display(); // show the display buffer
    delay (1000);

    // draw some dots in an 8x8 pattern
    for (x=0; x&lt;WIDTH; x+=8)
    {
        for (y=0; y&lt;HEIGHT-8; y+=8) // don't alter the stack!
        {
            oled_drawPixel(x,y,INVERSE);
        }
    }
}
</code></pre>

<h2 id="hardware-requirements">Hardware requirements</h2>
<p>These tiny displays communicate usually via I2C, but SPI versions do exist.
My display uses the I2C address 0x3C, but there are similar displays out
there configured to use the address 0x3D.</p>
<p>The display content has to be kept in memory as it is not possible to read
the memory content of the physical display. For 128x64 pixel this requires
1kB of RAM. For low-memory devices like the STM8S103 it means the display
buffer overlaps with the stack. Notice the chaotic pattern in the lower part
of the screen:</p>
<p><img alt="My 0.96&quot; OLED display" src="../oled-ssd1306.jpg" /></p>
<p>Technical data:</p>
<ul>
<li>Driver chip SSD1306</li>
<li>Display resolution: 128x64</li>
<li>Power: 3.3V, approx. 20mA (5V possible)</li>
<li>Interface: I2C, some modules support SPI as well</li>
<li>I2C-Address: 0x3c, configurable to 0x3d by setting a solder bridge (on
    some modules)</li>
</ul>
<p>Pin out of an I2C module:</p>
<table>
<thead>
<tr>
<th>Pin</th>
<th>Function</th>
<th>STM8S103 pin</th>
<th>sduino pin</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>GND</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>Vcc</td>
<td></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>SCL</td>
<td>PB4</td>
<td>PIN_WIRE_SCL, SCL, 4</td>
</tr>
<tr>
<td>4</td>
<td>SDA</td>
<td>PB5</td>
<td>PIN_WIRE_SDA, SDA, 3</td>
</tr>
</tbody>
</table>
<h2 id="further-reading">Further reading</h2>
<p>Technical information:</p>
<ul>
<li><a href="https://learn.adafruit.com/monochrome-oled-breakouts">Adafruit tutorial</a></li>
<li><a href="https://www.adafruit.com/datasheets/SSD1306.pdf">SSD1306 datasheet</a></li>
</ul>
<p>Other libraries:</p>
<ul>
<li><a href="https://github.com/adafruit/Adafruit_SSD1306">Adafruit library</a></li>
<li><a href="https://github.com/olikraus/u8glib">Old Arduino library u8glib</a></li>
<li><a href="https://github.com/olikraus/u8g2">newer library u8g2</a></li>
</ul>
<h2 id="possible-improvements">Possible improvements</h2>
<h3 id="faster-i2c-transfer">Faster I2C transfer</h3>
<p>Faster I2C transfer is supported by the <a href="../I2C/">I2C library</a>, but to use
it you have to modify the source code for the Mini_SSD1306 library. Make
this configurable in the instantiation function.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
