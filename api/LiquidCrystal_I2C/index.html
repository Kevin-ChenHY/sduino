<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Michael Mayer">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>LiquidCrystal_I2C character LCD connected via I2C backpack boards - Sduino</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">Sduino</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../..">Introduction</a>
</li>
                                    
<li >
    <a href="../../usage/board-manager-install/">Automatic Installation</a>
</li>
                                    
<li >
    <a href="../../usage/build-ide/">Building with the IDE</a>
</li>
                                    
<li >
    <a href="../../usage/faq/">FAQ/common problems</a>
</li>
                                    
<li >
    <a href="../../usage/why-stm8/">When to use an STM8S - and when not</a>
</li>
                                    
<li >
    <a href="../../usage/interrupts/">Pin change interrupts</a>
</li>
                                    
<li >
    <a href="../../usage/manual-install/">Manual Installation</a>
</li>
                                    
<li >
    <a href="../../usage/build-cli/">Building with a Makefile</a>
</li>
                                    
<li >
    <a href="../../usage/limitations/">Limitations</a>
</li>
                                    
<li >
    <a href="../../usage/status-todo/">Status and todo</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Libraries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../migration/">API description and migration guidelines</a>
</li>
                                    
<li >
    <a href="../Print/">Print</a>
</li>
                                    
<li >
    <a href="../HardwareSerial/">HardwareSerial</a>
</li>
                                    
<li >
    <a href="../SPI/">SPI</a>
</li>
                                    
<li >
    <a href="../Wire/">Wire</a>
</li>
                                    
<li >
    <a href="../I2C/">I2C</a>
</li>
                                    
<li >
    <a href="../EEPROM/">EEPROM</a>
</li>
                                    
<li >
    <a href="../LiquidCrystal/">LiquidCrystal character LCD library</a>
</li>
                                    
<li class="active">
    <a href="./">LiquidCrystal_I2C character LCD connected via I2C backpack boards</a>
</li>
                                    
<li >
    <a href="../LiquidCrystal_pcf2119/">LiquidCrystal_pcf2119 character LCD connected via I2C</a>
</li>
                                    
<li >
    <a href="../PCD8544/">PCD8544 libray for Nokia 5110-like graphical LCDs</a>
</li>
                                    
<li >
    <a href="../Mini_SSD1306/">Mini_SSD1306 library for monochrome OLED-displays</a>
</li>
                                    
<li >
    <a href="../Stepper/">Stepper library</a>
</li>
                                    
<li >
    <a href="../Servo/">Servo library</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../hardware/flashtool/">Flash tool</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8blue/">Generic STM8S103F3 breakout board (stm8blue)</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8s003/">Generic STM8S003 support</a>
</li>
                                    
<li >
    <a href="../../hardware/esp14/">ESP14 Wifi board (STM8S003F3P6)</a>
</li>
                                    
<li >
    <a href="../../hardware/w1209-thermostat/">W1209 thermostat board (STM8S003F3P6)</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8sblack/">Generic STM8S105K4 breakout board (stm8sblack)</a>
</li>
                                    
<li >
    <a href="../../hardware/stm8sdiscovery/">STM8S105Discovery evaluation board made by ST (STM8S105C6)</a>
</li>
                                    
<li >
    <a href="https://github.com/roybaer/sduino_uno">sduino Uno (STM8S105K6), inspired by Arduino Uno</a>
</li>
                                    
<li >
    <a href="https://github.com/roybaer/sduino_mb">sduino MB (STM8S208MB), inspired by Arduino Mega</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../developer/ide-integration/">IDE integration</a>
</li>
                                    
<li >
    <a href="../../developer/compiling-the-tools/">Compiling the tools</a>
</li>
                                    
<li >
    <a href="../../developer/cross-compile-for-osx/">Cross-compiling the tools for OSX</a>
</li>
                                    
<li >
    <a href="../../developer/update-to-manual/">Update an automatic installation to a manual installation</a>
</li>
                                    
<li >
    <a href="../../developer/macro/">C preprocessor macro magic</a>
</li>
                                    
<li >
    <a href="../../developer/pin_mapping/">Ways to define a pin mapping</a>
</li>
                                    
<li >
    <a href="../../developer/coding-style/">Coding style</a>
</li>
                                    
<li >
    <a href="../../developer/sdcc/">Using the SDCC compiler</a>
</li>
                                    
<li >
    <a href="../../developer/spl/">Using the SPL with SDCC and sduino</a>
</li>
                                    
<li >
    <a href="../../developer/bare-metal-programming/">Bare metal programming on the STM8</a>
</li>
                                    
<li >
    <a href="../../developer/optimizations/">Optimizations</a>
</li>
                                    
<li >
    <a href="../../developer/performance/">Performance comparison and benchmarking</a>
</li>
                                    
<li >
    <a href="../../developer/links/">Links and further reading</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../contact/">Contact</a>
                            </li>
                            <li >
                                <a href="../../about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../LiquidCrystal/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../LiquidCrystal_pcf2119/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/tenbaht/sduino/edit/master/docs/api/LiquidCrystal_I2C.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#liquidcrystal_i2c-library">LiquidCrystal_I2C Library</a></li>
            <li><a href="#api">API</a></li>
            <li><a href="#example">Example</a></li>
            <li><a href="#pin-connections">Pin connections</a></li>
            <li><a href="#possible-improvements">Possible improvements</a></li>
            <li><a href="#further-reading">Further reading</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="liquidcrystal_i2c-library">LiquidCrystal_I2C Library</h1>
<p>This library is for character LCDs based on the HD44780 controller connected
via I2C bus using the cheap I2C backpack modules based on the PCF8574(T/A).</p>
<p>It is derived from the
<a href="https://github.com/fdebrabander/Arduino-LiquidCrystal-I2C-library">LiquidCrystal_I2C</a>
library as of 09.05.2017 (<a href="https://github.com/fdebrabander/Arduino-LiquidCrystal-I2C-library/tree/e3701fb3f2398a6d18bfd94a4a7f36e065d57d77">commit
e3701fb</a>).
by <a href="https://github.com/fdebrabander">Frank de Brabander</a>.</p>
<h2 id="api">API</h2>
<p>The API is very similar (but, for unknown reasons, not identical) to the API
used by the Arduino LiquidCrystal library for text LCDs with a parallel
interface.</p>
<p>This library is a singleton library, it is not possible to use more than one
instance per sketch.</p>
<p>The API syntax is very similar to the original C++ syntax, thanks to some
<a href="../developer/macro">c preprocessor macro magic</a>.</p>
<p>Apart from the usual name mangeling for polymorph functions (mostly the
different variants of the Print::print method) moving the opening bracket at
the class declarator line and replacing the dots in the method names for
underscores is all it needs.</p>
<p>The original version of the LiquidCystal_I2C library requires the
definition of the LCD size and the desired character size (8 or 10 pixel
height) at the instantiation and uses a parameterless <code>begin()</code> method.</p>
<p>This differs slightly from the semantic of the regular Arduino
LiquidCrystal library using the parallel interface. There, the
instantiation defines only the electrical connection (the used pin
numbers) and defines the logical properties (cols, rows, charsize) later
with the <code>begin()</code> method.</p>
<p>As an addition to the Arduino version of this library this port
supports both initialization styles.</p>
<table>
<thead>
<tr>
<th>Arduino syntax</th>
<th>sduino syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LiquidCrystal_I2C lcd(i2c_addr,cols,rows,charsize)</code></td>
<td><code>LiquidCrystal_I2C (lcd,i2c_addr,rows,cols,charsize)</code></td>
</tr>
<tr>
<td><code>LiquidCrystal_I2C lcd(i2c_addr,cols,rows)</code></td>
<td><code>LiquidCrystal_I2C (lcd,i2c_addr,rows)</code></td>
</tr>
<tr>
<td>not allowed</td>
<td><code>LiquidCrystal_I2C (lcd,i2c_addr)</code></td>
</tr>
<tr>
<td><code>lcd.init(i2c_addr,cols,rows,charsize)</code></td>
<td><code>lcd_init(i2c_addr,cols,rows,charsize)</code></td>
</tr>
<tr>
<td><code>lcd.begin()</code></td>
<td><code>lcd_begin()</code></td>
</tr>
<tr>
<td>not allowed</td>
<td><code>lcd_begin_wh(cols,rows)</code></td>
</tr>
<tr>
<td>not allowed</td>
<td><code>lcd_begin_full(cols,rows,charsize)</code></td>
</tr>
<tr>
<td><code>lcd.clear()</code></td>
<td><code>lcd_clear()</code></td>
</tr>
<tr>
<td><code>lcd.home()</code></td>
<td><code>lcd_home()</code></td>
</tr>
<tr>
<td><code>lcd.noDisplay()</code></td>
<td><code>lcd_noDisplay()</code></td>
</tr>
<tr>
<td><code>lcd.display()</code></td>
<td><code>lcd_display()</code></td>
</tr>
<tr>
<td><code>lcd.noBlink()</code></td>
<td><code>lcd_noBlink()</code></td>
</tr>
<tr>
<td><code>lcd.blink()</code></td>
<td><code>lcd_blink()</code></td>
</tr>
<tr>
<td><code>lcd.noCursor()</code></td>
<td><code>lcd_noCursor()</code></td>
</tr>
<tr>
<td><code>lcd.cursor()</code></td>
<td><code>lcd_cursor()</code></td>
</tr>
<tr>
<td><code>lcd.scrollDisplayLeft()</code></td>
<td><code>lcd_scrollDisplayLeft()</code></td>
</tr>
<tr>
<td><code>lcd.scrollDisplayRight()</code></td>
<td><code>lcd_scrollDisplayRight()</code></td>
</tr>
<tr>
<td><code>lcd.printLeft()</code></td>
<td><code>lcd_printLeft()</code></td>
</tr>
<tr>
<td><code>lcd.printRight()</code></td>
<td><code>lcd_printRight()</code></td>
</tr>
<tr>
<td><code>lcd.leftToRight()</code></td>
<td><code>lcd_leftToRight()</code></td>
</tr>
<tr>
<td><code>lcd.rightToLeft()</code></td>
<td><code>lcd_rightToLeft()</code></td>
</tr>
<tr>
<td><code>lcd.shiftIncrement()</code></td>
<td><code>lcd_shiftIncrement()</code></td>
</tr>
<tr>
<td><code>lcd.shiftDecrement()</code></td>
<td><code>lcd_shiftDecrement()</code></td>
</tr>
<tr>
<td><code>lcd.noBacklight()</code></td>
<td><code>lcd_noBacklight()</code></td>
</tr>
<tr>
<td><code>lcd.Backlight()</code></td>
<td><code>lcd_Backlight()</code></td>
</tr>
<tr>
<td><code>result = lcd.getBacklight()</code></td>
<td><code>result = lcd_getBacklight()</code></td>
</tr>
<tr>
<td><code>lcd.noAutoscroll()</code></td>
<td><code>lcd_noAutoscroll()</code></td>
</tr>
<tr>
<td><code>lcd.autoscroll()</code></td>
<td><code>lcd_autoscroll()</code></td>
</tr>
<tr>
<td><code>lcd.createChar(number, data[])</code></td>
<td><code>lcd_createChar(number, data[])</code></td>
</tr>
<tr>
<td><code>lcd.setCursor(col,row)</code></td>
<td><code>lcd_setCursor(col,row)</code></td>
</tr>
<tr>
<td><code>result = lcd.write(value)</code></td>
<td><code>result = lcd_write(value)</code></td>
</tr>
<tr>
<td><code>lcd.command(value)</code></td>
<td><code>lcd_command(value)</code></td>
</tr>
</tbody>
</table>
<p>The library supports the following alias definitions introduced by the
original LiquidCrystal_I2C library. The use of these alias is depreciated
and should be avoided:</p>
<table>
<thead>
<tr>
<th>Arduino syntax</th>
<th>sduino syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lcd_blink_on()</code></td>
<td><code>lcd_blink_on()</code></td>
</tr>
<tr>
<td><code>lcd_blink_off()</code></td>
<td><code>lcd_blink_off()</code></td>
</tr>
<tr>
<td><code>lcd_cursor_on()</code></td>
<td><code>lcd_cursor_on()</code></td>
</tr>
<tr>
<td><code>lcd_cursor_off()</code></td>
<td><code>lcd_cursor_off()</code></td>
</tr>
<tr>
<td><code>lcd_setBacklight(new_val)</code></td>
<td><code>lcd_setBacklight(new_val)</code></td>
</tr>
<tr>
<td><code>lcd_load_custom_character(number, data[])</code></td>
<td><code>lcd_load_custom_character(number, data[])</code></td>
</tr>
<tr>
<td><code>lcd_printstr(string)</code></td>
<td><code>lcd_printstr(string)</code></td>
</tr>
</tbody>
</table>
<h2 id="example">Example</h2>
<p>Output some Text and count the time since the last reset. Notice the
slightly different position of the opening parenthesis at the "class
constructor" function LiquidCrystal_I2C compared to the C++ instatiation.</p>
<pre><code class="c">#include &lt;Arduino.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

// initialize the library with the I2C bus address
// The instance name &quot;lcd&quot; is *within* the brackets
LiquidCrystal_I2C (lcd,0x27,16,2);

void setup() {
  lcd_begin();
  lcd_print_s(&quot;hello, world!&quot;);
}


void loop() {
  lcd_setCursor(0, 1);
  lcd_print_u(millis() / 1000);
}
</code></pre>

<p>Compare this to the original Arduino C++-Sytax:</p>
<pre><code class="c">#include &lt;LiquidCrystal_I2C.h&gt;

// initialize the library with the I2C bus address
// The instance name &quot;lcd&quot; is *before* the brackets
LiquidCrystal_I2C lcd(0x27,16,2);

void setup() {
  lcd.begin();
  lcd.print(&quot;hello, world!&quot;);
}

void loop() {
  lcd.setCursor(0, 1);
  lcd.print(millis() / 1000);
}
</code></pre>

<p>As an extention to the original <code>LiquidCrystal_I2C</code> libray this Sduino port
supports an initialisation similar to the syntax of the regular
LiquidCrystal library: Defining only the electrical parameters at
instantiation (I2C bus address) and giving the logical parameters (display
size) with the <code>begin()</code> method:</p>
<pre><code class="c">#include &lt;Arduino.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

// initialize the library with the I2C bus address
// The instance name &quot;lcd&quot; is *within* the brackets
LiquidCrystal_I2C (lcd,0x27);

void setup() {
  lcd_begin(16,2);
  lcd_print_s(&quot;hello, world!&quot;);
}


void loop() {
  lcd_setCursor(0, 1);
  lcd_print_u(millis() / 1000);
}
</code></pre>

<h2 id="pin-connections">Pin connections</h2>
<p>The table shows the most common connection scheme as used by the popular
backpack boards from China:</p>
<table>
<thead>
<tr>
<th>PCF8574 bit</th>
<th>Backpack pin</th>
<th>LCD signal</th>
<th>LCD pin</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>13</td>
<td>RS</td>
<td>4</td>
</tr>
<tr>
<td>1</td>
<td>12</td>
<td>R/-W</td>
<td>5</td>
</tr>
<tr>
<td>2</td>
<td>11</td>
<td>EN</td>
<td>6</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>LED- (open collector, inverted)</td>
<td>16</td>
</tr>
<tr>
<td>4</td>
<td>6</td>
<td>D4</td>
<td>11</td>
</tr>
<tr>
<td>5</td>
<td>5</td>
<td>D5</td>
<td>12</td>
</tr>
<tr>
<td>6</td>
<td>4</td>
<td>D6</td>
<td>13</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>D7</td>
<td>14</td>
</tr>
</tbody>
</table>
<p>The numbering of the LCD connector counts in the opposite directions on the
the LCD and the backpack module. It looks like the person designing the PCB
layout got confused by the backwards mounting position ;-) But in reality it
doesn't matter, they both fit together nicely. It is just a unfortunate
silkscreen printing.</p>
<h2 id="possible-improvements">Possible improvements</h2>
<p>This is not a to-do-list, just brainstorming and a collection of random
thoughts.</p>
<h2 id="further-reading">Further reading</h2>
<p><a href="https://alselectro.wordpress.com/2016/05/12/serial-lcd-i2c-module-pcf8574/">Detailed look at the PCF8574 I2C port
 expander</a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
